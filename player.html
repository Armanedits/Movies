<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Now Playing</title>
    <!-- === CSS (Player Page ke liye Special Style) === -->
    <style>
        :root { --theme-color: #e74c3c; --dark-bg: #121212; --light-bg: #1f1f1f; --card-text-bg: #0c0c0c; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; background-color: var(--dark-bg); color: #fff; margin: 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        a { color: inherit; text-decoration: none; }

        /* Header aur Search Box ka Style */
        header { text-align: center; padding: 20px 0; border-bottom: 1px solid #222; }
        header img.logo { max-width: 150px; }
        
        /* Video Player ka Style */
        .player-wrapper { background-color: var(--dark-bg); border-radius: 10px; position: relative; width: 100%; max-width: 900px; margin: 20px auto; }
        .aspect-ratio-box { position: relative; width: 100%; height: 0; padding-top: 56.25%; background-color: #000; border-radius: 5px; overflow: hidden; }
        .aspect-ratio-box video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .loader { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); border: 4px solid rgba(255, 255, 255, 0.3); border-top: 4px solid var(--theme-color); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; z-index: 10; }
        @keyframes spin { 100% { transform: translate(-50%, -50%) rotate(360deg); } }
        .controls-container { position: absolute; bottom: 0; left: 0; width: 100%; z-index: 20; background-image: linear-gradient(to top, rgba(0,0,0,0.7), transparent); padding: 15px; box-sizing: border-box; display: flex; align-items: center; gap: 15px; opacity: 0; transition: opacity 0.3s; }
        .aspect-ratio-box:hover .controls-container { opacity: 1; }
        .control-btn { background: none; border: none; cursor: pointer; padding: 0; display: flex; align-items: center; }
        .control-btn svg { width: 24px; height: 24px; fill: white; }
        .timeline-container { flex-grow: 1; height: 8px; background-color: rgba(255, 255, 255, 0.3); border-radius: 4px; cursor: pointer; }
        .timeline { height: 100%; background-color: var(--theme-color); border-radius: 4px; width: 0%; }
        .time-display { font-size: 14px; min-width: 90px; }

        /* Title aur Description ka Style */
        .movie-details-container { padding: 20px; text-align: left; }
        #movie-title { font-size: 28px; margin: 0 0 10px 0; }
        #movie-description { font-size: 16px; color: #ccc; line-height: 1.6; }
        
        /* Related Movies ka Style */
        .related-movies h2 { font-size: 22px; margin-top: 40px; border-bottom: 2px solid var(--theme-color); padding-bottom: 10px; }
        #related-movies-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; margin-top: 20px; }
        .movie-card { background-color: var(--card-text-bg); border-radius: 8px; overflow: hidden; cursor: pointer; transition: transform 0.2s; }
        .movie-card:hover { transform: scale(1.05); }
        .movie-card img { width: 100%; height: auto; aspect-ratio: 2/3; object-fit: cover; }
        .movie-info { padding: 12px; }
        .movie-info h3 { margin: 0; font-size: 14px; color: #fff; }
    </style>
</head>
<body>
    <header class="container">
        <a href="index.html"><img src="https://i.postimg.cc/yNn1wfH5/boots.jpg" alt="Ultimate Movie Site Logo" class="logo"></a>
    </header>
    
    <main class="container">
        <!-- Video Player, Title, Description yahan aayega -->
        <div class="player-wrapper">
            <div id="video-player-goes-here">
                <!-- Video player script se yahan aayega -->
            </div>
            <div class="movie-details-container">
                <h1 id="movie-title">Loading title...</h1>
                <p id="movie-description">Loading description...</p>
            </div>
        </div>

        <!-- Related Movies Section -->
        <div class="related-movies">
            <h2>You might also like</h2>
            <div id="related-movies-grid"></div>
        </div>
    </main>

    <!-- === JAVASCRIPT LOGIC === -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        
        // Aapka original video player ka code (bilkul waisa hi)
        function loadVideoPlayer(movie) {
            const playerContainer = document.getElementById('video-player-goes-here');
            playerContainer.innerHTML = `<div class="aspect-ratio-box"><div class="loader"></div><video src="${movie.videoLink}"></video><div class="controls-container"><button class="control-btn" id="play-pause-btn"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button><button class="control-btn" id="rewind-btn"><svg viewBox="0 0 24 24"><path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z"/></svg></button><button class="control-btn" id="forward-btn"><svg viewBox="0 0 24 24"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/></svg></button><div class="timeline-container"><div class="timeline"></div></div><div class="time-display">00:00 / 00:00</div></div></div>`;
            activatePlayerControls();
        }

        function activatePlayerControls() {
            const playerContainer = document.getElementById('video-player-goes-here');
            const video = playerContainer.querySelector('video'); if(!video) return;
            const loader = playerContainer.querySelector('.loader'); const playPauseBtn = playerContainer.querySelector('#play-pause-btn'); const rewindBtn = playerContainer.querySelector('#rewind-btn'); const forwardBtn = playerContainer.querySelector('#forward-btn'); const timelineContainer = playerContainer.querySelector('.timeline-container'); const timeline = playerContainer.querySelector('.timeline'); const timeDisplay = playerContainer.querySelector('.time-display'); const playIcon = `<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>`; const pauseIcon = `<svg viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>`;
            video.addEventListener('waiting', () => { loader.style.display = 'block'; }); video.addEventListener('canplay', () => { loader.style.display = 'none'; }); const togglePlay = () => video.paused ? video.play() : video.pause(); video.addEventListener('play', () => { playPauseBtn.innerHTML = pauseIcon; }); video.addEventListener('pause', () => { playPauseBtn.innerHTML = playIcon; }); playPauseBtn.addEventListener('click', togglePlay); video.addEventListener('click', togglePlay); rewindBtn.addEventListener('click', () => { video.currentTime -= 10; }); forwardBtn.addEventListener('click', () => { video.currentTime += 10; });
            video.addEventListener('timeupdate', () => {
                const progress = (video.currentTime / video.duration) * 100; timeline.style.width = `${progress}%`;
                if (video.duration) { timeDisplay.textContent = `${formatTime(video.currentTime)} / ${formatTime(video.duration)}`; }
            });
            timelineContainer.addEventListener('click', (e) => { const rect = timelineContainer.getBoundingClientRect(); video.currentTime = ((e.clientX - rect.left) / rect.width) * video.duration; });
            const formatTime = (s) => new Date(s * 1000).toISOString().substr(14, 5);
            video.play().catch(() => { playPauseBtn.innerHTML = playIcon; });
        }
        
        // Page load hone par chalne wala naya code
        fetch('movies.json')
            .then(response => response.json())
            .then(movies => {
                const urlParams = new URLSearchParams(window.location.search);
                const movieId = urlParams.get('id');

                if (!movieId) { document.querySelector('main.container').innerHTML = `<h1>Error: Movie ID not found.</h1>`; return; }
                const currentMovie = movies.find(m => m.id == movieId);
                if (!currentMovie) { document.querySelector('main.container').innerHTML = `<h1>Error: Movie not found.</h1>`; return; }

                document.getElementById('movie-title').textContent = currentMovie.title;
                document.getElementById('movie-description').textContent = currentMovie.details;
                document.title = `Now Playing: ${currentMovie.title}`;
                loadVideoPlayer(currentMovie);

                const relatedGrid = document.getElementById('related-movies-grid');
                const relatedMovies = movies.filter(m => m.category === currentMovie.category && m.id != currentMovie.id);
                
                if (relatedMovies.length > 0) {
                    relatedMovies.forEach(movie => {
                        const movieLink = document.createElement('a');
                        movieLink.href = `player.html?id=${movie.id}`;
                        movieLink.innerHTML = `<div class="movie-card"><img src="${movie.poster}" alt="${movie.title}"><div class="movie-info"><h3>${movie.title}</h3></div></div>`;
                        relatedGrid.appendChild(movieLink);
                    });
                } else {
                    document.querySelector('.related-movies').style.display = 'none';
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.querySelector('main.container').innerHTML = `<h2 style="color: red;">Error: Could not load movie data.</h2>`;
            });
    });
    </script>
</body>
</html>
